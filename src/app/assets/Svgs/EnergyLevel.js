import { motion } from "framer-motion";
import gsap from "gsap";
import { useEffect } from "react";

const EnergyLevel = (props) => {

  const PathVariant = {
    hidden: {
      opacity: 0,
      pathLength: 0
    },
    visible: {
      opacity: 1,
      pathLength: 1,
      transition: {
        duration: 2,
        ease: "easeInOut"
      }
    }
  }

  useEffect(() => {
    
    const el = document.getElementById('text');

    const obj = { val: 0 };
    gsap.to(obj, {
      val:45,
      duration: 2,
      ease: 'power1.out',
      onUpdate: () => {
        el.textContent = `${Math.round(obj.val)}%`
      }
    });
  }, []);

  return (
    <motion.svg
    width={120}
    height={100}
    viewBox="0 -6 112 124"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    {...props}
    initial="hidden"
    animate="visible"
  >
    <path
      d="M95.6591 87.6017C98.0928 89.5103 101.64 89.0975 103.296 86.4855C108.06 78.9714 110.98 70.4056 111.777 61.4906C112.742 50.7102 110.562 39.8814 105.501 30.3142C100.439 20.747 92.7144 12.8514 83.2599 7.58276C73.8055 2.31411 63.0268 -0.101856 52.228 0.627182C41.4292 1.35622 31.073 5.19902 22.4125 11.6906C13.752 18.1822 7.15823 27.0445 3.42902 37.2051C-0.300193 47.3658 -1.00505 58.3894 1.39972 68.9423C3.3884 77.6691 7.43321 85.7648 13.1639 92.5704C15.156 94.9361 18.7261 94.8684 20.8812 92.6501C23.0362 90.4317 22.9529 86.9055 21.0205 84.4907C16.8115 79.2307 13.8272 73.0689 12.3198 66.4538C10.396 58.0115 10.9598 49.1926 13.9432 41.0641C16.9266 32.9356 22.2016 25.8458 29.13 20.6525C36.0584 15.4592 44.3433 12.385 52.9824 11.8017C61.6214 11.2185 70.2444 13.1513 77.8079 17.3662C85.3715 21.5811 91.5516 27.8976 95.6004 35.5514C99.6493 43.2051 101.393 51.8682 100.622 60.4925C100.017 67.2502 97.8882 73.7571 94.4243 79.5351C92.8341 82.1878 93.2254 85.6932 95.6591 87.6017Z"
      fill="none" opacity={0.5} stroke="#B37EFC" strokeMiterlimit={10} strokeWidth={12}
    />
    <motion.path
      variants={PathVariant}
      d="M20.8528 92.6224C18.6959 94.8391 15.1259 94.9041 13.1356 92.5367C8.20951 86.6773 4.52379 79.8539 2.32819 72.4793C-0.40156 63.3105 -0.736942 53.5952 1.35402 44.26C3.44499 34.9248 7.89259 26.2809 14.2727 19.1526C19.4043 13.4191 25.6486 8.8199 32.6034 5.62168C35.4134 4.32953 38.6146 5.91118 39.6198 8.83608C40.625 11.761 39.0479 14.916 36.2711 16.2779C31.1128 18.8081 26.4731 22.315 22.6181 26.6221C17.5141 32.3247 13.956 39.2398 12.2832 46.708C10.6104 54.1762 10.8788 61.9484 13.0626 69.2834C14.7119 74.8233 17.4124 79.9744 20.9985 84.4632C22.929 86.8795 23.0096 90.4058 20.8528 92.6224Z"
      fill="none" 
      stroke="#fff" 
      strokeMiterlimit={10} 
      strokeWidth={12}
    />
    <text id="text" x={35} y={65} fontWeight={"600"} fontSize={"22px"} fill="#fff"></text>
  </motion.svg>
  )
}

export default EnergyLevel;